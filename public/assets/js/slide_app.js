$(document).ready(function(){if($("#slideList").length>0){$(".flexslider").flexslider({animation:"slide",animationLoop:!1,itemWidth:250,itemMargin:5,directionNav:!1});var a=Sortable.create(slideList,{animation:150,group:"slides",disabled:!0,dataIdAttr:"data-id",onSort:function(a){},store:{get:function(a){var e=localStorage.getItem("slides");return e?e.split("|"):[]},set:function(a){localStorage.clear();var e=a.toArray();localStorage.setItem("slides",e.join("|"))}}});$("#switcher").on("click",function(){var e=a.option("disabled");a.option("disabled",!e),e?($(this).addClass("btn-default").removeClass("btn-primary"),$(this).html('<i class="fa fa-lock"></i> Deshabilitar edición')):($(this).addClass("btn-primary").removeClass("btn-default"),$(this).html('<i class="fa fa-unlock"></i> Habilitar edición'))}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#saveOrder").on("submit",function(a){if(a.preventDefault(),localStorage.getItem("slides")){var e=$(this).serialize(),t="&order="+localStorage.getItem("slides").split("|");$.ajax({type:"POST",url:document.location.href+"/order",data:e+t,beforeSend:function(a){$("#saveorder").addClass("btn-success").removeClass("btn-primary"),$("#saveorder").html('<i class="fa fa-refresh fa-spin"></i> Guardando...')}}).fail(function(a,e){localStorage.clear(),$("#saveorder").addClass("btn-primary").removeClass("btn-success"),$("#saveorder").html('<i class="fa fa-floppy-o"></i> Guardar orden'),$("#alertForAjax").append("<div class='alert alert-danger alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button><strong>Oh rayos! Algo ha salido mal:</strong> "+a.statusText+" code: "+a.status+"</div>")}).done(function(a){localStorage.clear(),$("#saveorder").addClass("btn-primary").removeClass("btn-success"),$("#saveorder").html('<i class="fa fa-floppy-o"></i> Guardar orden'),$("#alertForAjax").append("<div class='alert alert-success alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button><strong>Guardado exitosamente</strong> "+a.msg+"</div>")})}else $("#alertForAjax").append("<div class='alert alert-warning alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button><strong>Alerta SYS126:</strong> No hay datos que guardar, por favor haz las modificaciones pertinentes y posteriormente presiona este botón para guardar.</div>")}),$(".fancy-btn").fancybox({openEffect:"elastic",closeEffect:"elastic",helpers:{title:{type:"float"}}})}});